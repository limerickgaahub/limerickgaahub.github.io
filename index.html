<!doctype html> 
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Limerick GAA Hub</title>
<meta name="color-scheme" content="light only">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BW8JCZRZHV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BW8JCZRZHV');
  </script>

<link rel="canonical" href="https://limerickgaahub.ie/">
  
<!-- Meta description -->
<meta name="description" content="Fixtures, results and tables for Limerick GAA. Filter by competition, team, or date.">

<!-- Open Graph (Facebook, WhatsApp, LinkedIn) -->
<meta property="og:title" content="Limerick GAA Hub">
<meta property="og:description" content="Fixtures, results and tables for Limerick GAA. Filter by competition, team, or date.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://limerickgaahub.ie/">
<meta property="og:image" content="https://limerickgaahub.ie/android-chrome-512x512.png">

<!-- X / Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Limerick GAA Hub">
<meta name="twitter:description" content="Fixtures, results and tables for Limerick GAA. Filter by competition, team, or date.">
<meta name="twitter:image" content="https://limerickgaahub.ie/android-chrome-512x512.png">
<meta name="twitter:site" content="@limerickgaahub">

<meta property="og:image:alt" content="Limerick GAA Hub logo">

<meta name="robots" content="index,follow">

<!-- Favicons & app icons -->
<!-- SVG (modern browsers) -->
<link rel="icon" href="/favicon.svg" type="image/svg+xml">

<!-- Classic PNG favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">

<!-- ICO fallback -->
<link rel="shortcut icon" href="/favicon.ico">

<!-- Apple Touch -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<meta name="apple-mobile-web-app-title" content="Limerick GAA Hub">

<!-- Android / PWA -->
<link rel="manifest" href="/site.webmanifest">

<!-- Font Awesome -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<style>
/* THEME */
:root{
  --card:#ffffff; --muted:#6b7280; --accent:#006B3C; --accent-2:#88C999;
  --line:#e9ecef; --text:#111; --bg:#f6f7f8;
}

/* A11y-only label */
.sr-only {
  position:absolute!important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* Controls container stays tidy */
.controls.card { 
  display:flex; align-items:center; gap:8px; 
}

/* Pretty SELECT (status / team) */
.pretty-select {
  position:relative; flex:1;
  border-radius:999px;
  background:#fff;
  border:1px solid var(--line);
  overflow:hidden;
}
.pretty-select select {
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  border:0; outline:0; background:transparent;
  width:100%;
  padding:.65rem 2.2rem .65rem .9rem;
  font-size:1rem; line-height:1.2;
}
.pretty-select::after {
  content:"";
  position:absolute; right:.8rem; top:50%; transform:translateY(-50%) rotate(45deg);
  width:.55rem; height:.55rem; border-right:2px solid #666; border-bottom:2px solid #666;
  pointer-events:none;
}

/* Pretty INPUT (date) to match the SELECT look */
.pretty-input {
  position:relative; flex:1;
  border-radius:999px;
  background:#fff;
  border:1px solid var(--line);
  overflow:hidden;
}
.pretty-input input[type="date"] {
  border:0; outline:0; background:transparent;
  width:100%;
  padding:.65rem 2.2rem .65rem .9rem;
  font-size:1rem; line-height:1.2;
}

/* Hide the browser's small date chevron,
   but keep the native picker behavior */
.pretty-input input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0 !important;           /* invisible */
  -webkit-appearance: none !important;
  appearance: none !important;
  border: none !important;
  background: transparent !important;

  /* keep it clickable to trigger the calendar */
  pointer-events: auto !important;
  position: absolute;
  right: 0; top: 0;
  width: 100%;
  height: 100%;
}


/* Chevron to match the Club dropdown */
.pretty-input::after {
  content:"";
  position:absolute; right:.8rem; top:50%; transform:translateY(-50%) rotate(45deg);
  width:.55rem; height:.55rem; border-right:2px solid #666; border-bottom:2px solid #666;
  pointer-events:none;
}


/* Improve font rendering sharpness */
.sharecard, .sc-table-standings td, .sc-table-standings th {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
  
  
/* If I use a darker toolbar, I can add a .toolbar-dark parent and mirror colors:
.toolbar-dark .pretty-select, .toolbar-dark .pretty-input { background:#111; border-color:#222; }
.toolbar-dark .pretty-select select, .toolbar-dark .pretty-input input { color:#fff; }
.toolbar-dark .pretty-select::after { border-color:#bbb; }
*/

/* ===== Safe dead-space reclaim (sides) ===== */
body {                 /* was margin: 70px 20px 20px; */
  margin:70px 12px 20px;
}
@media (max-width:880px){
  body {               /* was 60px 10px 10px; override slightly */
    margin:60px 8px 10px;
  }
  .card {              /* a touch tighter on mobile */
    padding:10px;      /* already apply 10px below; keep it consistent */
  }
}
/* Optional: make the main cards slightly rounder/tighter to reduce the “double-outline” feel */
.card { border:1px solid var(--line); }  /* adds a clean single boundary so the inner table border feels intentional */
.table-wrap { border-color:#eef0f2; }    /* soften inner border */

  
*{ box-sizing:border-box; }
html{ -webkit-text-size-adjust:100%; text-size-adjust:100%; }
body{
  /* keep your new margins */
  margin:70px 12px 20px;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased;
}
h1{ margin:0; font-weight:800; font-size:20px; }
h2{ margin:0 0 8px; font-size:16px; }
.sm-muted{ color:#6b7280; font-size:12px; }

/* Competition (mobile) alignment */
td.rcol, th.rcol { vertical-align: middle; }      /* center R vertically */
td.vcol, th.vcol { text-align: center; vertical-align: middle; }  /* center Venue */
td.dcol, th.dcol,
td.tcol, th.tcol { text-align: left; }            /* Date/Time left */
  
/* Header */
.header{ position:fixed; top:0; left:0; right:0; z-index:100; background:#fff; border-bottom:1px solid var(--line); }
.header::before{ content:""; display:block; height:4px; background:var(--accent); }
.header-inner{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 16px; max-width:1100px; margin:0 auto; }
.brand{ display:flex; align-items:center; gap:10px; text-decoration:none; color:inherit; }
.brand img{ width:20px; height:20px; }
.navtabs{ display:flex; gap:8px; align-items:center; }
.navtab{ padding:8px 12px; border-radius:999px; background:#ececec; cursor:pointer; font-weight:700; border:1px solid transparent; }
.navtab.active{ background:var(--accent); color:#fff; border-color:var(--accent); }

/* Burger / offcanvas */
.burger{ display:none; background:none; border:none; font-size:20px; padding:8px; }
.offcanvas{ position:fixed; inset:0 0 0 auto; width:80%; max-width:320px; background:#fff; box-shadow:-10px 0 24px rgba(0,0,0,.12); transform:translateX(100%); transition:transform .25s ease; z-index:120; }
.offcanvas.open{ transform:translateX(0); }
.offcanvas .oc-head{ padding:14px 16px; font-weight:800; border-bottom:1px solid var(--line); }
.offcanvas .oc-body{ padding:10px; display:flex; flex-direction:column; gap:8px; }
.offcanvas .oc-link{ padding:10px 12px; border-radius:12px; background:#f6f7f8; cursor:pointer; font-weight:700; }
.oc-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.25); opacity:0; pointer-events:none; transition:opacity .2s; z-index:110; }
.oc-backdrop.show{ opacity:1; pointer-events:auto; }

/* Cards & sections */
.card{ background:#fff; border-radius:18px; box-shadow:0 8px 24px rgba(0,0,0,.05); padding:14px; max-width:1100px; margin:0 auto; }
.section-tabs{ display:flex; gap:10px; margin:6px 0 12px; flex-wrap:wrap; }
.section-tabs .seg{ padding:9px 14px; border-radius:999px; background:#efefef; cursor:pointer; font-weight:800; border:1px solid transparent; }
.section-tabs .seg.active{ background:var(--accent); color:#fff; border-color:var(--accent); }

/* Competition dropdown */
.menu{ position:absolute; min-width:280px; background:#fff; border:1px solid var(--line); border-radius:12px; box-shadow:0 8px 28px rgba(0,0,0,.12); padding:6px; display:none; max-height:60vh; overflow:auto; z-index:130; }
.menu.open{ display:block; }
.menu .item{ padding:12px 14px; border-radius:10px; cursor:pointer; font-weight:700; }
.menu .item:hover,.menu .item.active{ background:#f1f9f4; }

/* Selected label */
.comp-selected{ margin:8px 0 10px; font-weight:800; font-size:15px; color:#1f2937; }

/* Always reserve ~two lines for the competition header text */
#comp-selected{
  display:block;
  white-space:normal;   /* allow wrapping */
  line-height:1.2em;
  min-height:2.4em;     /* 2 × line-height */
  overflow:hidden;      /* prevents layout jump if very long */
}
  
/* Share bar */
.sharebar{ display:flex; align-items:center; gap:8px; margin:12px 0 0; }
.sharebar .spacer{ flex:1; }
.iconbtn{ display:inline-flex; align-items:center; justify-content:center; gap:6px; padding:8px 10px; border-radius:10px; border:1px solid var(--line); background:#fff; cursor:pointer; font-weight:700; font-size:13px; }
.iconbtn i{ font-size:14px; }

/* Tables */
.table-wrap{ overflow-x:hidden; border-radius:14px; border:1px solid var(--line); background:#fff; min-width:0; }
table{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
thead th{
  position:sticky; top:0; background:#f8fafb; border-bottom:1px solid var(--line);
  font-size:14px; font-weight:800; color:#1f2937; text-align:left; padding:14px;
  white-space:nowrap;                /* keep header labels like "Date/Time" intact */
}
tbody td{
  padding:14px; border-bottom:1px solid var(--line); font-size:15px; line-height:1.25;
  word-break:normal; overflow-wrap:normal;        /* do NOT break words anywhere */
  vertical-align:top;
}
td.right, th.right{ text-align:right; }
tbody tr:nth-child(even) td{ background:#fcfcfd; }
tbody tr:hover td{ background:#f1f9f4; }

/* Remove old green identity bar on each row */
.table-wrap tbody tr{ position:relative; }
.table-wrap tbody tr::before{ content:none; }

/* Match block */
td.match, th.match{ text-align:center; }
.match-block{ display:grid; grid-template-rows:auto auto auto; row-gap:3px; justify-items:center; }
.match-team{ display:block; line-height:1.2; }

/* Scoreline: one line, green pill */
.match-score{
  display:inline-block;
  padding:2px 10px;
  border-radius:999px;
  background:#e6f4ea;
  color:var(--accent);
  font-weight:800;
  font-size:14px;
  line-height:1.2;
  letter-spacing:.2px;
  white-space:nowrap;                /* keep "0-23 - 0-18" on one line */
}

/* Status badge */
.status-badge{
  display:inline-block; padding:3px 8px; border-radius:999px; font-weight:700; font-size:12px;
  background:#f3f4f6; color:#111;
}
.status-badge.status-Result,.status-badge.status-final,.status-badge.status-Final{ background:#e8f5e9; }
.status-badge.status-Fixture{ background:#eef2ff; }

/* Match meta line */
.match-meta{ margin-top:4px; font-size:12px; color:var(--muted); }

/* Standings spacing (no truncation/ellipsis, allow natural wrap) */
#g-standings-table thead th, #g-standings-table tbody td{ padding:8px 6px; }
#g-standings-table td:first-child, #g-standings-table th:first-child{
  white-space:normal; word-break:normal; overflow-wrap:normal;
}
#g-standings-table td:not(:first-child), #g-standings-table th:not(:first-child){ text-align:right; }
#g-standings-table tbody td:not(:first-child){ font-variant-numeric:tabular-nums; }

/* Modal standings mirror (also no truncation) */
#modal-standings thead th, #modal-standings tbody td{ padding:8px 6px; }
#modal-standings td:first-child, #modal-standings th:first-child{
  white-space:normal; word-break:normal; overflow-wrap:normal;
}
#modal-standings td:not(:first-child), #modal-standings th:not(:first-child){ text-align:right; }
#modal-standings tbody td:not(:first-child){ font-variant-numeric:tabular-nums; }
  
/* Controls lighter */
.controls.card{ box-shadow:none; border-radius:12px; border:1px solid var(--line); }

/* Give Team more space in both compact and expanded tables */
#g-standings-table{ table-layout:fixed; width:100%; }
#modal-standings{ table-layout:fixed;  width:100%; }
/* compact table (keep as-is) */
#g-standings-table th:first-child, #g-standings-table td:first-child{
  width:52%;
  white-space:normal; word-break:normal; overflow-wrap:anywhere;
}

/* expanded modal table (a bit narrower for Team to free space for numbers) */
#modal-standings th:first-child, #modal-standings td:first-child{
  width:43%;
  white-space:normal; word-break:normal; overflow-wrap:anywhere;
}
#g-standings-table th:not(:first-child), #g-standings-table td:not(:first-child),
#modal-standings th:not(:first-child), #modal-standings td:not(:first-child){
  width:auto;           /* slightly narrower numeric cols */
  min-width:3.2rem;
}

/* Modal numeric columns — give each a sensible width */
#modal-standings th:nth-child(2), #modal-standings td:nth-child(2){ min-width:3.2rem; white-space:nowrap; } /* P */
#modal-standings th:nth-child(3), #modal-standings td:nth-child(3){ min-width:3.2rem; white-space:nowrap; } /* W */
#modal-standings th:nth-child(4), #modal-standings td:nth-child(4){ min-width:3.2rem; white-space:nowrap; } /* D */
#modal-standings th:nth-child(5), #modal-standings td:nth-child(5){ min-width:3.2rem; white-space:nowrap; } /* L */
#modal-standings th:nth-child(6), #modal-standings td:nth-child(6){ min-width:4.7rem; white-space:nowrap; } /* PF */
#modal-standings th:nth-child(7), #modal-standings td:nth-child(7){ min-width:4.7rem; white-space:nowrap; } /* PA */
#modal-standings th:nth-child(8), #modal-standings td:nth-child(8){ min-width:4.7rem; white-space:nowrap; } /* Diff */
#modal-standings th:nth-child(9), #modal-standings td:nth-child(9){ min-width:5rem; white-space:nowrap; } /* Pts */


/* Mobile niceties */
@supports(padding:max(0px)){
  body{
    padding-left:max(env(safe-area-inset-left),0);
    padding-right:max(env(safe-area-inset-right),0);
  }
}
@media (max-width:880px){
  .navtabs{ display:none; }
  .burger{ display:inline-block; }
  .card{ padding:12px; }
  thead th, tbody td{ padding:10px 7px; font-size:13px; }
  .match-score{ font-size:13px; }

  /* LGH PATCH — mobile polish for all match tables */
#g-table, #team-table, #date-table{ table-layout:fixed; width:100%; }

/* R column: narrower & centred */
#g-table thead th:nth-child(1),  #g-table tbody td:nth-child(1),
#team-table thead th:nth-child(1),#team-table tbody td:nth-child(1),
#date-table thead th:nth-child(1),#date-table tbody td:nth-child(1){
  width:2.25rem;
  text-align:center !important;
  vertical-align:middle !important;
  white-space:nowrap;
}

/* Date/Time (single column on mobile): centred and compact width */
#g-table thead th:nth-child(2),  #g-table tbody td:nth-child(2),
#team-table thead th:nth-child(2),#team-table tbody td:nth-child(2),
#date-table thead th:nth-child(2),#date-table tbody td:nth-child(2){
  width:5.25rem;
  text-align:center !important;
  vertical-align:middle !important;
}

/* Match column: give it the flex space to prevent overlap */
#g-table thead th:nth-child(3),  #g-table tbody td:nth-child(3),
#team-table thead th:nth-child(3),#team-table tbody td:nth-child(3),
#date-table thead th:nth-child(3),#date-table tbody td:nth-child(3){
  width:auto;
}

/* Venue: keep visible, centred, modest width */
#g-table thead th:nth-child(4),  #g-table tbody td:nth-child(4),
#team-table thead th:nth-child(4),#team-table tbody td:nth-child(4),
#date-table thead th:nth-child(4),#date-table tbody td:nth-child(4){
  width:22%;
  text-align:center !important;
  vertical-align:middle !important;
}

/* Three-line Date/Time stack */
.dt3{ display:grid; grid-auto-rows:min-content; row-gap:2px; justify-items:center; line-height:1.05; }
.dt3 .dt-day{ font-weight:700; }
.dt3 .dt-date, .dt3 .dt-time{ font-variant-numeric:tabular-nums; }

  /* Date/Time: left aligned */
  #g-table thead th:nth-child(2),
  #g-table tbody td:nth-child(2){
    text-align:left !important;
    vertical-align:middle !important;
  }
  /* Venue: centred */
  #g-table thead th:nth-child(4),
  #g-table tbody td:nth-child(4){
    text-align:center !important;
    vertical-align:middle !important;
  }
}

/* XS phones: keep Venue visible; just hide the R column */
#team-table thead th:nth-child(1), #team-table tbody td:nth-child(1),
#date-table thead th:nth-child(1), #date-table tbody td:nth-child(1){ display:none; }

thead th, tbody td{ padding:.55rem .55rem; }
.match-score{ font-size:12.5px; }


/* Footer */
.site-footer{ max-width:1100px; margin:16px auto 24px; text-align:center; color:#6b7280; font-size:12px; }

/* Back button */
.back-btn{ display:inline-flex; align-items:center; gap:6px; margin:8px 0; padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:#f9fafb; cursor:pointer; font-size:13px; color:#333; }
.back-btn i{ font-size:12px; }

/* Back to top (Date view) */
.scroll-top-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:150;          /* header=100, offcanvas=120, modal=200 */
  display:none;         /* only shown when Date panel visible */
  padding:10px 12px;
  border-radius:999px;
  background:var(--accent);
  color:#fff;
  border:1px solid var(--accent);
  cursor:pointer;
  font-size:16px;
}
.scroll-top-btn:hover{
  background:var(--accent-2);
  border-color:var(--accent-2);
}


/* LGH PATCH — hide modal by default; show only when opened */
.modal{ 
  position:fixed; inset:0; display:none; 
  align-items:center; justify-content:center; 
  background:rgba(0,0,0,.35); z-index:200; padding:20px;
}
.modal[aria-hidden="false"]{ display:flex; }
.modal .sheet{
  width:min(900px,96vw); max-height:90vh; overflow:auto;
  background:#fff; border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,.2);
}
.modal .sheet-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:12px 14px; border-bottom:1px solid var(--line);
}
.modal .close{
  border:1px solid var(--line); border-radius:8px; padding:6px 10px;
  background:#f9fafb; cursor:pointer;
}
/* END LGH PATCH */

/* === LGH PATCH — Mobile table readability + dead space reclaim === */
@media (max-width:880px){

  /* Trim outer margins + card padding slightly to reclaim dead space */
  body{ margin:60px 8px 10px; }     /* was 60px 10px 10px */
  .card{ padding:10px; }            /* was 12px */

  /* Tighten table cell padding (safe for fingers, still readable) */
  thead th, tbody td{ padding:8px 6px; }   /* was 10px 7px */

  /* Column width rebalance:
     - R shrinks slightly (2.25rem → 2.0rem)
     - Date/Time shrinks slightly (5.25rem → 5.0rem)
     - Venue gains space (22% → 26%) */
  #g-table thead th:nth-child(1),  #g-table tbody td:nth-child(1),
  #team-table thead th:nth-child(1),#team-table tbody td:nth-child(1),
  #date-table thead th:nth-child(1),#date-table tbody td:nth-child(1){
    width:2.0rem;
  }

  #g-table thead th:nth-child(2),  #g-table tbody td:nth-child(2),
  #team-table thead th:nth-child(2),#team-table tbody td:nth-child(2),
  #date-table thead th:nth-child(2),#date-table tbody td:nth-child(2){
    width:4.5rem;
  }

  #g-table thead th:nth-child(4),  #g-table tbody td:nth-child(4),
  #team-table thead th:nth-child(4),#team-table tbody td:nth-child(4),
  #date-table thead th:nth-child(4),#date-table tbody td:nth-child(4){
    width:27%;
    text-align:center !important;
    vertical-align:middle !important;
  }
}

/* XS phones (≤360px) — squeeze a bit more without hurting readability */
@media (max-width:360px){

  .card{ padding:8px; }  /* was 10px above */
  thead th, tbody td{ padding:7px 5px; } /* slightly tighter */

  /* Give Venue a touch more space */
  #g-table thead th:nth-child(4),  #g-table tbody td:nth-child(4),
  #team-table thead th:nth-child(4),#team-table tbody td:nth-child(4),
  #date-table thead th:nth-child(4),#date-table tbody td:nth-child(4){
    width:28%;   /* was 26% above */
  }

  /* Optional: if Venue text still clips on very long names,
     I can hide the R column entirely on XS */
  #team-table thead th:nth-child(1), #team-table tbody td:nth-child(1),
  #date-table thead th:nth-child(1), #date-table tbody td:nth-child(1){
    display:none;
  }
}
/* === END PATCH === */

/* === LGH PATCH — mobile: bleed inner blocks to card edges (with +1px overbleed) === */
@media (max-width: 880px){
  /* declare mobile card padding + derived overbleed */
  :root{
    --card-pad: 10px;            /* your mobile .card padding */
    --bleed: calc(var(--card-pad));  /* +1px to hide curve/border seam */
  }

  /* Ensure cards actually use the variable (keeps things DRY if you change later) */
  .card{ padding: var(--card-pad); }

  /* Tables: Competition / Club / Date */
  #group-panel .table-wrap,
  #by-team .table-wrap,
  #by-date .table-wrap{
    margin-left: calc(-1 * var(--bleed));
    margin-right: calc(-1 * var(--bleed));
    border-left: 0;
    border-right: 0;
    border-radius: 0;
  }

  /* Controls (filter / club select / date picker) */
  #group-panel .controls.card,
  #by-team .controls.card,
  #by-date .controls.card{
    margin-left: calc(-1 * var(--bleed));
    margin-right: calc(-1 * var(--bleed));
    border-left: 0;
    border-right: 0;
    border-radius: 0;
  }
}
/* === END PATCH === */
  
/* Social links in About */
.social-list{ display:flex; flex-wrap:wrap; gap:10px; margin:8px 0 0; }
.social-link{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; border:1px solid var(--line);
  border-radius:999px; background:#fff; text-decoration:none; color:inherit;
  font-weight:700; font-size:13px;
}
.social-link i{ font-size:14px; }

/* Share buttons – consistent look */
.iconbtn[data-role]{ padding:8px 12px; font-weight:700; }

/* === LGH PATCH — Coloured About links + green Share buttons === */

/* Social link colours */
.social-link[href*="instagram"] { 
  background: #E1306C; /* Instagram pink */
  color: #fff;
}
.social-link[href*="x.com"] { 
  background: #000000; /* X black */
  color: #fff;
}
.social-link[href^="mailto:"] { 
  background: var(--accent); /* site green */
  color: #fff;
}

/* Force icon + text inside social links to white */
.social-link i,
.social-link span {
  color: #fff !important;
}

/* Copy + Share buttons: green theme */
.iconbtn[data-role="copy"],
.iconbtn[data-role="share"] {
  background: var(--accent);
  color: #fff;
  border: 1px solid var(--accent);
}

.iconbtn[data-role="copy"]:hover,
.iconbtn[data-role="share"]:hover {
  background: var(--accent-2);
  border-color: var(--accent-2);
}

/* Footnote (subtle) */
.footnote{
  margin-top:8px;
  font-size:12px;       /* small */
  color:#6b7280;        /* muted */
  font-style:italic;    /* gentle emphasis */
}

/* Give bottom sharebars a little space and tidy alignment */
.sharebar { margin-top: 14px; }
@media (max-width:880px){
  .sharebar { justify-content:center; }
  .sharebar .spacer { display:none; }
}

/* Desktop/tablet only: give numerics more room */
@media (min-width: 881px) {
  #g-standings-table th.right,
  #g-standings-table td.right,
  #modal-standings th.right,
  #modal-standings td.right {
    min-width: 3.4em;   /* roomy but not excessive */
  }
  #g-standings-table th:nth-child(8),
  #g-standings-table td:nth-child(8),
  #modal-standings th:nth-child(8),
  #modal-standings td:nth-child(8) {
    min-width: 4.2em;   /* Diff */
  }
}

/* Mobile: keep numerics tight so Team gets space */
@media (max-width: 880px) {
  #g-standings-table th.right,
  #g-standings-table td.right,
  #modal-standings th.right,
  #modal-standings td.right { 
    min-width: 2.4em; 
  }
  #g-standings-table th:nth-child(8),
  #g-standings-table td:nth-child(8),
  #modal-standings th:nth-child(8),
  #modal-standings td:nth-child(8) { 
    min-width: 3.2em; 
  }
}

/* On very small screens, tighten Diff slightly to avoid overflow */
@media (max-width: 420px) {
  #g-standings-table th:nth-child(8),
  #g-standings-table td:nth-child(8),
  #modal-standings th:nth-child(8),
  #modal-standings td:nth-child(8) {
    min-width: 3.8em; /* compromise */
  }
}


/* === LGH PATCH — keep card tables inside the card border === */
#group-panel .table-wrap > table,
#by-team .table-wrap > table,
#by-date .table-wrap > table,
#g-standings-table {
  width: 100.0%;   /* was 100% via the global table rule */
  margin: 0 auto; /* centers so both vertical edges align cleanly */
}

/* On very narrow screens, trim a touch more */
@media (max-width: 420px){
  #group-panel .table-wrap > table,
  #by-team .table-wrap > table,
  #by-date .table-wrap > table,
  #g-standings-table {
    width: 100%;
  }
}

/* === LGH PATCH — widen numeric columns in standings === */
#g-standings-table th.right,
#g-standings-table td.right,
#modal-standings th.right,
#modal-standings td.right {
  min-width: 4em; /* base for P, W, D, L, PF, PA, Pts */
}

/* Give Diff extra space */
#g-standings-table th:nth-child(8),
#g-standings-table td:nth-child(8),
#modal-standings th:nth-child(8),
#modal-standings td:nth-child(8) {
  min-width: 4.5em;  /* much wider for Diff */
  text-align: right;
}

/* === LGH PATCH — widen mobile panels slightly to align edges === */
@media (max-width:880px){
  .panel.card{
    margin-left:-4px;   /* nudge left */
    margin-right:-4px;  /* nudge right */
    width: calc(100% + 8px); /* keep overall width neat */
  }
}

/* === LGH Share Card — overlay + card === */
#sharecard-overlay[hidden]{ display:none !important; }
#sharecard-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:flex; align-items:center; justify-content:center; z-index:9999;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
}
.sc-modal{ background:#fff; width:min(960px, 92vw); max-height:92vh; overflow:auto; border-radius:16px; padding:16px 16px 24px; }
.sc-modal-hd{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.sc-modal h3{ font-size:20px; margin:0; }
.sc-x{ border:0; background:#000; color:#fff; width:28px; height:28px; border-radius:50%; cursor:pointer; }

#sc-form{ display:grid; grid-template-columns: 1fr 1fr; gap:12px 16px; margin-bottom:12px; }
#sc-form .sc-row{ display:flex; flex-direction:column; gap:6px; }
#sc-form label{ font-size:13px; color:#333; }
#sc-form input, #sc-form select{ padding:8px 10px; border-radius:8px; border:1px solid #DDD; font-size:14px; }
.sc-actions{ grid-column:1/-1; display:flex; gap:8px; padding-top:4px; }
.sc-actions button{ padding:8px 12px; border-radius:10px; border:1px solid #DDD; background:#f6f6f6; cursor:pointer; }
.sc-actions button:disabled{ opacity:.5; cursor:not-allowed; }

/* Card sizes (platform presets) */
.sharecard{
  box-sizing:border-box; background:#0A3D1F; color:#fff; padding:48px; border-radius:24px;
}

/* --- Share Card: subtle vignette, table depth, corner ribbon --- */
.sharecard{ position:relative; overflow:hidden; }

/* soft vignette + top highlight */
.sharecard::before{
  content:"";
  position:absolute; inset:-10%;
  background:
    radial-gradient(120% 80% at 20% 0%, rgba(255,255,255,0.06), transparent 60%),
    radial-gradient(120% 100% at 50% 120%, rgba(0,0,0,0.24), transparent 55%);
  pointer-events:none;
}
.sharecard::after{
  content:"";
  position:absolute; inset:0;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,0.04);
  border-radius:24px;
  pointer-events:none;
}

/* some depth so the table “sits” on the card */
.sharecard .sc-table{ filter: drop-shadow(0 10px 24px rgba(0,0,0,.12)); }

/* corner ribbon (Fixtures / Results / Table • Today/Tomorrow) */
.sc-ribbon{
  position:absolute; top:14px; right:14px;
  padding:8px 12px;
  background:#0f5132;           /* dark green */
  border:1px solid rgba(255,255,255,.14);
  border-radius:999px;
  font-weight:800; font-size:24px; line-height:1;
  color:#EAF6EE;
  letter-spacing:.2px;
  backdrop-filter: saturate(120%) blur(2px);
  pointer-events:none;
}

/* optional: mini crests beside team names */
.sc-team{ display:flex; align-items:center; gap:10px; justify-content:center; }
.sc-team-crest{ width:36px; height:36px; border-radius:8px; object-fit:contain; background:#fff; }
.sc-team-dot{
  width:28px; height:28px; border-radius:50%;
  display:inline-flex; align-items:center; justify-content:center;
  font-weight:800; background:#ffffff; color:#0A3D1F;
}
.sc-team-name{ line-height:1.1; }
  
.sc-size-ig-portrait{ width:1080px; height:1350px; }  /* IG portrait */
.sc-size-ig-square{ width:1080px; height:1080px; }    /* IG square */
.sc-size-x-landscape{ width:1200px; height:675px; }   /* X/Twitter 16:9 */

.sc-header{ display:flex; align-items:center; gap:24px; margin-bottom:24px; }
.sc-crest{ width:96px; height:96px; object-fit:contain; }
.sc-title{ font-size:56px; font-weight:700; line-height:1.05; word-break:break-word; }

.sc-table{ width:100%; border-collapse:collapse; background:#fff; color:#111; border-radius:20px; overflow:hidden; }
.sc-table thead th{ font-size:34px; text-align:left; padding:18px 20px; background:#F2F5F0; }
.sc-table tbody td{ font-size:34px; padding:18px 20px; border-top:1px solid #E6EAE3; }
.sc-footer{ margin-top:24px; text-align:center; font-size:36px; opacity:0.9; }

/* Injected button beside your existing sharebars */
.lgh-sc-btn{ margin-left:8px; padding:6px 10px; border-radius:10px; border:1px solid var(--line); background:#fff; cursor:pointer; font-weight:700; }

/* === Share Card fine-tuning === */

/* Slightly smaller cell font → more room, same readability */
.sharecard .sc-table thead th{ font-size:32px; }
.sharecard .sc-table tbody td{ font-size:32px; }

/* Fixtures/Results: match site’s stacked Date/Time (day / dd/mm / hh:mm) */
.sc-fixtures tbody td:first-child{ text-align:center; vertical-align:middle; }
.sc-fixtures .dt3{
  display:grid; grid-auto-rows:min-content; row-gap:4px; justify-items:center; line-height:1.05;
}
.sc-fixtures .dt3 .dt-day{ font-weight:700; }
.sc-fixtures .dt3 .dt-date, .sc-fixtures .dt3 .dt-time{ font-variant-numeric:tabular-nums; }

/* Column balance to prevent crowding */
.sc-fixtures thead th:nth-child(1){ width:28%; }
.sc-fixtures thead th:nth-child(2){ width:auto; }       /* Match expands */
.sc-fixtures thead th:nth-child(3){ width:26%; text-align:center; }
.sc-fixtures tbody td:nth-child(2){ white-space:normal; word-break:normal; overflow-wrap:anywhere; }
.sc-fixtures tbody td:nth-child(3){ text-align:center; }

/* Standings: give Team the space, keep numbers tidy and narrow */
#sc-table-standings th:first-child, #sc-table-standings td:first-child{
  width:52%; white-space:normal; word-break:normal; overflow-wrap:anywhere;
}
#sc-table-standings th:not(:first-child), #sc-table-standings td:not(:first-child){
  text-align:right; min-width:2.8em; font-variant-numeric:tabular-nums;
}

/* Tighter space between D and L on the card (keeps PD roomy) */
.sharecard .sc-table-standings th:nth-child(4),
.sharecard .sc-table-standings td:nth-child(4), /* D */
.sharecard .sc-table-standings th:nth-child(5),
.sharecard .sc-table-standings td:nth-child(5)  /* L */
{ 
  padding-left: 10px; 
  padding-right: 10px; 
  min-width: 2.4em;
}

/* Leave PD slightly wider so it breathes */
.sharecard .sc-table-standings th:nth-child(6),
.sharecard .sc-table-standings td:nth-child(6)  /* PD */
{
  min-width: 3.2em;
}

  
/* Make sure the footer never gets clipped inside the card */
.sharecard{ display:flex; flex-direction:column; }
.sharecard .sc-footer{ margin-top:24px; }

/* Trim bottom space for fixtures/results so content sits more central */
.sharecard.sc-mode-fixtures,
.sharecard.sc-mode-results{
  padding-bottom:32px;        /* base is 48px */
}
.sharecard.sc-mode-fixtures .sc-footer,
.sharecard.sc-mode-results .sc-footer{
  margin-top:18px;            /* was 24px */
}

  
/* Share Card — centre Date/Time + Match headers & cells */
.sc-fixtures thead th:nth-child(1),
.sc-fixtures thead th:nth-child(2),
.sc-fixtures tbody td:nth-child(1),
.sc-fixtures tbody td:nth-child(2){
  text-align:center;
  vertical-align:middle;
}

/* Stacked match cell: Team A / mid / Team B */
.sc-match{
  display:grid;
  grid-template-rows:auto auto auto;
  row-gap:6px;                 /* tidy vertical spacing */
  justify-items:center;
  line-height:1.05;
}
.sc-match-team{ line-height:1.1; }

/* Small competition tag above the teams (used for digest mode) */
.sc-comp {
  font-size: 12px;
  line-height: 1.0;
  opacity: .75;
  font-weight: 600;
}

/* Radios row layout in the overlay */
.sc-seg { display:flex; gap:14px; flex-wrap:wrap; align-items:center; }
.sc-seg label { display:flex; gap:6px; align-items:center; font-size:14px; }


  
/* “v” or scoreline in the middle */
.sc-match-mid{
  font-weight:800;
  font-variant-numeric:tabular-nums;
}
.sc-match-mid.sc-score{
  display:inline-block;
  padding:3px 14px;
  border-radius:999px;
  background:#E6F4EA;          /* same green pill look as site */
  color:#006B3C;
}

/* Emphasise club names, keep 'v' visually secondary */
.sharecard .sc-match-team{ 
  font-weight:800; 
  font-size:36px;           /* up from cell’s 32px */
  line-height:1.1;
}

/* Only shrink the 'v' (do not affect result pills) */
.sharecard .sc-match-mid:not(.sc-score){
  font-size:26px;           /* smaller than teams */
  letter-spacing:.5px;
  opacity:.9;
}


  
/* Align numerals neatly in standings on the card */
.sc-table-standings th, .sc-table-standings td { font-variant-numeric: tabular-nums; }

/* Keep Team column left, centre all stat columns (P → Pts) */
.sc-table-standings th:first-child,
.sc-table-standings td:first-child {
  text-align: left;   /* Team */
}

.sc-table-standings th:not(:first-child),
.sc-table-standings td:not(:first-child) {
  text-align: center; /* P, W, D, L, PD, Pts */
}

/* Base: use the whole canvas vertically */
.sharecard{ display:flex; flex-direction:column; justify-content:flex-start; }

/* Tighten for bigger tables (card-wide) */
.sc-tight-7 .sc-table-standings thead th{ font-size:30px; padding:16px 18px; }
.sc-tight-7 .sc-table-standings tbody td{ font-size:30px; padding:16px 18px; }

.sc-tight-8 .sc-table-standings thead th{ font-size:28px; padding:14px 16px; }
.sc-tight-8 .sc-table-standings tbody td{ font-size:28px; padding:14px 16px; }

/* Extra-tight specifically for X landscape (short canvas) */
.sc-size-x-landscape.sc-tight-7 { padding:36px 32px 24px; }
.sc-size-x-landscape.sc-tight-7 .sc-title{ font-size:50px; }
.sc-size-x-landscape.sc-tight-7 .sc-table-standings thead th{ font-size:24px; padding:12px 12px; }
.sc-size-x-landscape.sc-tight-7 .sc-table-standings tbody td{ font-size:24px; padding:12px 12px; }

.sc-size-x-landscape.sc-tight-8 { padding:32px 28px 20px; }
.sc-size-x-landscape.sc-tight-8 .sc-title{ font-size:46px; }
.sc-size-x-landscape.sc-tight-8 .sc-table-standings thead th{ font-size:22px; padding:10px 10px; }
.sc-size-x-landscape.sc-tight-8 .sc-table-standings tbody td{ font-size:22px; padding:10px 10px; }

/* New: slightly tight for 6 rows */
.sc-tight-6 .sc-table-standings thead th{ font-size:34px; padding:16px 18px; }
.sc-tight-6 .sc-table-standings tbody td{ font-size:34px; padding:16px 18px; }

/* Give the table more breathing room in square + landscape */
.sc-size-ig-square.sc-tight-6    { padding:40px 40px 28px; }  /* was 48 all sides */
.sc-size-x-landscape.sc-tight-6  { padding:32px 28px 22px; }  /* slightly tighter than default */

/* X/Twitter landscape needs extra squeeze vertically */
.sc-size-x-landscape.sc-tight-6 { padding:36px 30px 24px; }
.sc-size-x-landscape.sc-tight-6 .sc-title{ font-size:48px; }
.sc-size-x-landscape.sc-tight-6 .sc-table-standings thead th{ font-size:24px; padding:12px 12px; }
.sc-size-x-landscape.sc-tight-6 .sc-table-standings tbody td{ font-size:24px; padding:12px 12px; }


/* Centre the Date/Time and Match headers on the card */
.sc-fixtures thead th:nth-child(1),
.sc-fixtures thead th:nth-child(2),
.sc-fixtures thead th:nth-child(3){ text-align:center; }
.sc-fixtures tbody td:first-child{ text-align:center; }

/* Stacked teams in the card table */
.sc-fixtures .teams{ display:grid; row-gap:6px; justify-items:center; line-height:1.05; }
.sc-fixtures .teams .mid{ font-weight:800; }
  
/* Hero look for very short lists so the card doesn't feel empty */
.sc-hero .sc-title{ font-size:68px; }
.sc-hero .sc-table thead th{ font-size:34px; padding:20px 22px; }
.sc-hero .sc-table tbody td{ font-size:36px; padding:22px 22px; }

/* Slightly tighter rows site-wide without hurting readability */
.table-wrap tbody td { padding: 12px 12px; }   /* was 14px */
.sc-fixtures thead th:nth-child(3){ text-align:center; }


.sharecard .sc-table-standings + .sc-footnote {
  margin-top: 16px;
}

/* Footnote under sharecards (clearer + slightly emphasized) */
.sc-footnote{
  margin-top:10px;           /* a touch closer to the table */
  font-size:18px;            /* +2px from your current 16px */
  font-style:italic;         /* subtle emphasis */
  color:#374151;
  background:#F4F6F4;        /* light grey highlight */
  padding:10px 12px;
  border-radius:10px;
  text-align:left;
  line-height:1.35;
}

/* Colour hierarchy for Points (Pts) column on sharecards only */
.sharecard .sc-table-standings thead th:nth-child(7),
.sharecard .sc-table-standings tbody td:nth-child(7){
  color:#0B7D3B;        /* richer green */
  font-weight:800;      /* pop a little more */
}

/* Fixtures/Results: reduce bottom dead space so content sits more central */
.sharecard.sc-mode-fixtures,
.sharecard.sc-mode-results{
  padding-bottom:32px;              /* was 48px */
}
.sharecard.sc-mode-fixtures .sc-footer,
.sharecard.sc-mode-results .sc-footer{
  margin-top:18px;                  /* was 24px */
}

/* --- Tighten footnote spacing under the standings (sharecards only) --- */

/* 1) Remove any large gap after the table */
.sharecard .sc-table-standings{
  margin-bottom: 6px;            /* was larger via defaults */
}

/* 2) Make the footnote sit very close to the table */
.sharecard .sc-table-standings + .sc-footnote{
  margin-top: 6px;               /* override any earlier 10–16px */
}

/* 3) Keep the footnote padding but don’t add extra vertical space */
.sharecard .sc-footnote{
  padding: 8px 12px;             /* was 10px 12px; slightly tighter */
}

/* --- Mobile-only chevron fix for By Date --- */
@media (max-width: 880px){
  /* Remove the tiny native chevron/calendar icon */
  .pretty-input input[type="date"]::-webkit-calendar-picker-indicator{
    display: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
  }

  /* Keep your big chevron (from .pretty-input::after) */
  .pretty-input{ position: relative; }
  .pretty-input::after{
    /* your existing big chevron styles already here; ensure it stays visible */
    z-index: 2;
  }

  /* Make the big chevron area a tappable button that sits on top (right side) */
  .pretty-input .date-open{
    position: absolute;
    top: 0; right: 0;
    width: 3rem;               /* hit-area width around the big chevron */
    height: 100%;
    background: transparent;
    border: 0;
    padding: 0;
    z-index: 3;                /* above ::after chevron so taps register */
    cursor: pointer;
  }
}

  
</style>

<script>
  // Capture ?share=1 early before syncURL() strips it
  window.__LGH_SHARE_ENABLED =
    (new URLSearchParams(location.search).get('share') === '1');
</script>

</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="header-inner">
      <a href="/" class="brand">
        <img src="/favicon-32x32.png" alt="Logo">
        <h1>Limerick GAA Hub</h1>
      </a>
      <div class="navtabs">
        <div class="navtab active" data-nav="hurling">Hurling</div>
        <div class="navtab" data-nav="football">Football</div>
        <div class="navtab" data-nav="about">About</div>
      </div>
      <button class="burger" id="burger" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
    </div>
  </div>
  <div class="oc-backdrop" id="oc-backdrop"></div>
  <div class="offcanvas" id="offcanvas" aria-hidden="true">
    <div class="oc-head">Menu</div>
    <div class="oc-body">
      <div class="oc-link" data-nav="hurling">Hurling</div>
      <div class="oc-link" data-nav="football">Football</div>
      <div class="oc-link" data-nav="about">About</div>
    </div>
  </div>


  <!-- Hurling -->
  <div id="panel-hurling" class="card">
    <div class="section-tabs view-tabs" id="view-tabs">
      <div class="seg vt active" data-target="group-panel" id="comp-tab">Competition <i class="fa-solid fa-chevron-down" style="font-size:12px; margin-left:6px;"></i></div>
      <div class="seg vt" data-target="by-team">Club</div>
      <div class="seg vt" data-target="by-date">Date</div>
    </div>
    <div class="menu" id="comp-menu" role="menu" aria-hidden="true"></div>

    <div class="panel card" id="group-panel" style="margin-top:6px;">
        <div class="comp-selected" id="comp-selected" aria-live="polite"></div>

    <div class="section-tabs">
      <div class="seg active" data-view="matches" id="matches-seg">
        <span id="matches-label">Matches</span>
        <i class="fa-solid fa-chevron-down" id="matches-chevron" style="font-size:12px; margin-left:6px;"></i>
      </div>
      <div class="seg" data-view="table">Table</div>
    </div>
    <!-- New: Matches dropdown menu -->
    <div class="menu" id="matches-menu" role="menu" aria-hidden="true"></div>

      <div class="controls card" id="controls-matches">
  <label for="status" class="sr-only">Show</label>
  <div class="pretty-select">
    <select id="status">
      <option value="">All (fixtures & results)</option>
      <option value="Result">Results only</option>
      <option value="Fixture">Fixtures only</option>
    </select>
  </div>
</div>


    
      <div class="table-wrap matches-wrap">
        <table id="g-table"><thead></thead><tbody></tbody></table>
      </div>

      <div id="g-standings" style="margin-top:12px; display:none;">
        <div style="display:flex; gap:8px; justify-content:flex-end; margin-bottom:8px;">
          <button class="iconbtn" id="btn-expand"><i class="fa-solid fa-up-right-and-down-left-from-center"></i> Expand</button>
        </div>
        <div class="table-wrap">
          <table id="g-standings-table">
            <thead>
              <tr><th>Team</th><th class="right">P</th><th class="right">W</th><th class="right">D</th><th class="right">L</th><th class="right">Pts</th></tr>
            </thead><tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Table footnote -->
      <div id="table-footnote" class="footnote" style="display:none;">
        Tie-breaks: Qualification: Head-to-Head (two teams only), then Points Difference, Points For, Goals For. Relegation: Playoff if two teams on equal points.
      </div>

      <!-- Share (Competition) -->
      <div class="sharebar" id="sharebar-comp">
        <button class="iconbtn" data-role="copy"><i class="fa-solid fa-link"></i> Copy link</button>
        <button class="iconbtn" data-role="share"><i class="fa-solid fa-share"></i> Share</button>
        <div class="spacer"></div>
      </div> 
    </div>

      <div class="panel card" id="by-team" style="display:none; margin-top:6px;">
        <h2>By Club</h2>
        <div class="controls card" id="controls-team">
          <label for="team" class="sr-only">Select club</label>
        <div class="pretty-select">
          <select id="team"><option value="">Select club…</option></select>
    </div>
  </div>

      
        <div class="table-wrap"><table id="team-table"><thead></thead><tbody></tbody></table></div>
      
        <!-- Share (Team) -->
        <div class="sharebar" id="sharebar-team">
          <button class="iconbtn" data-role="copy"><i class="fa-solid fa-link"></i> Copy link</button>
          <button class="iconbtn" data-role="share"><i class="fa-solid fa-share"></i> Share</button>
          <div class="spacer"></div>
        </div>
      </div>


        <!-- Share (Date) — inside the panel -->
            <div class="panel card" id="by-date" style="display:none; margin-top:6px;">
              <h2>By Date</h2>
              <div id="controls-date" class="controls card">
                <label class="sr-only" for="date-input">Select date</label>
                <div class="pretty-input">
                  <input id="date-input" type="date" />
                  <!-- Mobile chevron tap target -->
                  <button type="button" class="date-open" aria-label="Open calendar"></button>
                </div>
              </div>

            
              <div class="table-wrap"><table id="date-table"><thead></thead><tbody></tbody></table></div>

            <!-- Back to Top button (only shows when Date tab active) -->
            <button class="scroll-top-btn" id="scroll-top-btn" aria-label="Back to top">
              <i class="fa-solid fa-arrow-up"></i>
            </button>

            
              
              <!-- Share (Date) -->
              <div class="sharebar" id="sharebar-date">
                <button class="iconbtn" data-role="copy"><i class="fa-solid fa-link"></i> Copy link</button>
                <button class="iconbtn" data-role="share"><i class="fa-solid fa-share"></i> Share</button>
                <div class="spacer"></div>
              </div>
            </div>
      </div>    <!-- end of #panel-hurling -->


  
      
  <!-- Football -->
  <div id="panel-football" class="card" style="display:none;">
    <h2>Football</h2>
    <div class="sm-muted">Coming soon.</div>
  </div>

  <!-- About -->
  <div id="panel-about" class="card" style="display:none;">
      <p>Limerick GAA Hub is designed to provide a clear overview of fixtures and results, easily filterable by competition, club, or date.</p>
      <p>The aim is to additionally build an archive of historical results over time.</p>
      <p>This site is not associated with Limerick GAA. Official fixtures and results can still be found at 
        <a href="https://limerickgaa.ie" target="_blank" rel="noopener noreferrer">limerickgaa.ie</a>.
      </p>
    
      <div class="social-list" aria-label="Social links">
        <a class="social-link" href="https://www.instagram.com/limerickgaahub" target="_blank" rel="noopener noreferrer"
           aria-label="Visit Limerick GAA Hub on Instagram">
           <i class="fab fa-instagram"></i><span>@limerickgaahub</span>
        </a>
        <a class="social-link" href="https://x.com/limerickgaahub" target="_blank" rel="noopener noreferrer"
           aria-label="Visit Limerick GAA Hub on X (Twitter)">
           <i class="fa-brands fa-x-twitter"></i><span>@limerickgaahub</span>
        </a>
        <a class="social-link" href="mailto:limerickgaahub@gmail.com"
           aria-label="Email Limerick GAA Hub">
           <i class="fas fa-envelope"></i><span>limerickgaahub@gmail.com</span>
        </a>
      </div>

      <p style="font-size: 12px; color: #6b7280; margin-top: 15px;">
        Privacy: This site uses Google Analytics to collect anonymous visitor statistics. 
        No personal data is collected or shared.
      </p>     
</div> <!-- end of #panel-about -->

  <!-- Expand modal -->
<div class="modal" id="standings-modal" aria-hidden="true" inert>
  <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1">
    <div class="sheet-header">
      <h3 id="modal-title">Table</h3>
      <button class="close" id="modal-close">Close</button>
    </div>
    <div class="table-wrap">
      <table id="modal-standings">
        <thead>
          <tr>
            <th>Team</th><th class="right">P</th><th class="right">W</th>
            <th class="right">D</th><th class="right">L</th>
            <th class="right">PF</th><th class="right">PA</th>
            <th class="right">PD</th><th class="right">Pts</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>


  <footer class="site-footer">Limerick GAA Hub · 2025</footer>

  <!-- JS -->
  <script src="/js/app_v7_3_3.fix12.js" defer></script>
  <script>
    // Inline logger to confirm flags at load
    window.addEventListener('load', () => {
      console.log("[LGH] onload flags:",
        "LGH_V7_3_READY =", window.LGH_V7_3_READY,
        "LGH_V7_3_3_READY =", window.LGH_V7_3_3_READY
      );
    });

    // Burger
    (function(){
      const burger=document.getElementById('burger'), oc=document.getElementById('offcanvas'), bd=document.getElementById('oc-backdrop');
      const open=()=>{ oc.classList.add('open'); bd.classList.add('show'); oc.setAttribute('aria-hidden','false'); };
      const close=()=>{ oc.classList.remove('open'); bd.classList.remove('show'); oc.setAttribute('aria-hidden','true'); };
      burger.addEventListener('click', open);
      bd.addEventListener('click', close);
      oc.addEventListener('click', e=>{
        const link=e.target.closest('.oc-link');
        if(link){
          const tab=document.querySelector(`.navtab[data-nav="${link.dataset.nav}"]`);
          if(tab) tab.click();
          close();
        }
      });
    })();

    function closeCompMenu(){
      const menu=document.getElementById('comp-menu');
      if(menu){ menu.classList.remove('open'); menu.setAttribute('aria-hidden','true'); }
    }


    // View tab switching closes dropdown
    document.querySelectorAll('.view-tabs .vt').forEach(seg=>{
      seg.addEventListener('click', ()=>{
        if(seg.dataset.target!=='group-panel'){ closeCompMenu(); }
      });
    });
    document.querySelectorAll('.navtab').forEach(tab=>{
      tab.addEventListener('click', ()=>{ closeCompMenu(); });
    });

    // Also hide matches-only controls when leaving the Competition view
      document.querySelectorAll('.view-tabs .vt').forEach(seg=>{
        seg.addEventListener('click', ()=>{
          const inGroup = seg.dataset.target === 'group-panel';
          const mc = document.getElementById('controls-matches');
          if (mc) mc.style.display = inGroup ? '' : 'none';
        });
      });


    
    // Back button

    // Brand click = reset to Hurling Competition
    document.querySelector('.brand').addEventListener('click', e=>{
      e.preventDefault();
      document.querySelector('.navtab[data-nav="hurling"]').click();
      document.querySelector('#view-tabs .vt[data-target="group-panel"]').click();
    });

    // Warn if app didn't init (tolerant)
    window.addEventListener('load', () => {
      setTimeout(() => {
        const ok = (window.LGH_V7_3_3_READY === true) || (window.LGH_V7_3_READY === true);
        if (!ok) {
          document.getElementById('lgh-warning').style.display = 'block';
          console.error("[LGH] Warning shown: READY flags not true at load.");
        } else {
          console.log("[LGH] App ready; warning suppressed.");
        }
        // Ensure default view on first load
        document.getElementById('g-standings').style.display = 'none';
        document.querySelector('.matches-wrap').style.display = '';
      }, 50);
    });

    // Blur selects on Android to close pickers
    (function(){
      ['team','status','date-input'].forEach(id=>{
        const el=document.getElementById(id);
        if(el){ el.addEventListener('change',()=>el.blur()); }
      });
    })();

    // Sharebar wiring
    (function(){
      function getContext(){
        const activeCompSeg = document.querySelector('#group-panel .section-tabs .seg.active');
        const compView = activeCompSeg ? activeCompSeg.getAttribute('data-view') : 'matches';
        const compName = (document.getElementById('comp-selected')?.textContent || '').trim() || 'Competition';
        const statusSel = document.getElementById('status');
        const statusText = statusSel ? statusSel.options[statusSel.selectedIndex].text : 'All (fixtures & results)';

        const teamSel = document.getElementById('team');
        const teamText = teamSel ? teamSel.options[teamSel.selectedIndex]?.text || '' : '';

        const dateSel  = document.getElementById('date-input');
        const dateText = dateSel && dateSel.value ? dateSel.value : '';

        const teamVisible = getComputedStyle(document.getElementById('by-team')).display !== 'none';
        const dateVisible = getComputedStyle(document.getElementById('by-date')).display !== 'none';

        if (teamVisible && teamText) return { msg: `Limerick GAA Hub — ${teamText} (${statusText})` };
        if (dateVisible) {
         const niceDate = dateText
           ? new Date(dateText + 'T00:00:00').toLocaleDateString(undefined, { weekday:'short', year:'numeric', month:'short', day:'numeric' })
           : 'Selected date';
         return { msg: `Limerick GAA Hub — By date: ${niceDate} (${statusText})` };
      }
        const viewLabel = compView === 'table' ? 'Table' : 'Matches';
        return { msg: `Limerick GAA Hub — ${compName}: ${viewLabel} (${statusText})` };
      }

function updateSharebars(){
  const { msg } = getContext();
  const url = location.href;

  // Share intents
  const xIntent  = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(msg) + '&url=' + encodeURIComponent(url);
  const fbIntent = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url);
  const waIntent = 'https://wa.me/?text=' + encodeURIComponent(msg + ' ' + url);
  const mailto   = 'mailto:?subject=' + encodeURIComponent('Limerick GAA Hub') +
                   '&body=' + encodeURIComponent(msg + '\n\n' + url);

  ['sharebar-comp','sharebar-team','sharebar-date'].forEach(id=>{
    const bar = document.getElementById(id);
    if (!bar) return;

    const btnX     = bar.querySelector('[data-role="x"]');
    const btnFB    = bar.querySelector('[data-role="fb"]');
    const btnWA    = bar.querySelector('[data-role="wa"]');
    const btnEmail = bar.querySelector('[data-role="email"]');
    const btnCopy  = bar.querySelector('[data-role="copy"]');
    const btnShare = bar.querySelector('[data-role="share"]');

    if (btnX)     btnX.href    = xIntent;
    if (btnFB)    btnFB.href   = fbIntent;
    if (btnWA)    btnWA.href   = waIntent;
    if (btnEmail) btnEmail.href= mailto;

    if (btnCopy) {
      btnCopy.onclick = async () => {
        try {
          await navigator.clipboard.writeText(url);
          btnCopy.textContent = 'Link copied!';
          setTimeout(()=> btnCopy.innerHTML = '<i class="fa-solid fa-link"></i> Copy link', 1200);
        } catch {
          const t = document.createElement('textarea');
          t.value = url; document.body.appendChild(t); t.select();
          document.execCommand('copy'); document.body.removeChild(t);
          btnCopy.textContent = 'Link copied!';
          setTimeout(()=> btnCopy.innerHTML = '<i class="fa-solid fa-link"></i> Copy link', 1200);
        }
      };
    }

    if (btnShare) {
      btnShare.onclick = async () => {
        if (navigator.share) {
          try { await navigator.share({ title: document.title, text: msg, url }); } catch {}
        } else {
          // No Web Share API — fall back to Facebook (best preview card)
          window.open(fbIntent, '_blank', 'noopener,noreferrer');
        }
      };
    }
  });
}


      ['change','click','input','popstate','hashchange'].forEach(evt=>{
        window.addEventListener(evt, ()=> setTimeout(updateSharebars, 50), true);
      });

      const sel = document.getElementById('comp-selected');
      if (sel && 'MutationObserver' in window) {
        new MutationObserver(()=> setTimeout(updateSharebars, 10)).observe(sel, { childList:true, subtree:true, characterData:true });
      }

      window.addEventListener('load', ()=> setTimeout(updateSharebars, 100));

      // Back to top button logic
(function(){
  const btn = document.getElementById('scroll-top-btn');
  if (!btn) return;

  btn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  // Show button only when Date panel is active
  const datePanel = document.getElementById('by-date');
  const observer = new MutationObserver(() => {
    const visible = getComputedStyle(datePanel).display !== 'none';
    btn.style.display = visible ? 'inline-flex' : 'none';
  });
  observer.observe(datePanel, { attributes: true, attributeFilter: ['style'] });
})();



      
    })();

  </script>
  <!-- LGH Share Card Overlay (hidden; shown only with ?share=1) -->
<div id="sharecard-overlay" hidden>
  <div class="sc-modal">
    <div class="sc-modal-hd">
      <h3>Create Share Image</h3>
      <button type="button" class="sc-x" aria-label="Close">×</button>
    </div>

    <form id="sc-form">
      <div class="sc-row">
        <label>What</label>
        <select name="mode">
          <option value="fixtures">Fixtures</option>
          <option value="results">Results</option>
          <option value="table">Table / Standings</option>
          <option value="digest">Digest (by Date/Range)</option>
        </select>
      </div>

      <div class="sc-row">
        <label>Date</label>
        <select name="preset">
          <option value="all">All</option>
          <option value="today">Today</option>
          <option value="tomorrow">Tomorrow</option>
        </select>
      </div>

      <!-- Only shown when mode = digest -->
      <div class="sc-row" data-row="range">
        <label>Range (From → To)</label>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px;">
          <input type="date" name="from" placeholder="From (YYYY-MM-DD)" />
          <input type="date" name="to"   placeholder="To (YYYY-MM-DD, optional)" />
        </div>
        <small class="sm-muted">Leave <em>To</em> empty for a single day.</small>
      </div>
      
      <!-- Only shown when mode = digest -->
      <div class="sc-row" data-row="digest-what">
        <label>Include</label>
        <div class="sc-seg">
          <label><input type="radio" name="what" value="all" checked> Fixtures &amp; Results</label>
          <label><input type="radio" name="what" value="fixtures"> Fixtures only</label>
          <label><input type="radio" name="what" value="results"> Results only</label>
        </div>
      </div>

      
      <div class="sc-row">
        <label>Club (optional)</label>
        <input type="text" name="team" placeholder="e.g., Na Piarsaigh" />
      </div>

      <div class="sc-row">
        <label>Rows (optional)</label>
        <input type="text" name="rows" placeholder="e.g., 3-7 for a mid-list slice" />
      </div>

      <div class="sc-row">
        <label>Size</label>
        <select name="size">
          <option value="ig-portrait">Instagram Portrait (1080×1350)</option>
          <option value="ig-square">Instagram Square (1080×1080)</option>
          <option value="x-landscape">X / Twitter (1200×675)</option>
        </select>
      </div>

      <div class="sc-row">
        <label>Title (optional)</label>
        <input type="text" name="title" placeholder="Auto-filled from your selection" />
      </div>

      <div class="sc-actions">
        <button type="button" id="sc-preview">Preview</button>
        <button type="button" id="sc-download" disabled>Download PNG</button>
        <button type="button" id="sc-copycap" disabled>Copy caption</button>
      </div>
    </form>

    <!-- Live preview (this is what becomes the PNG) -->
    <div id="share-card" class="sharecard sc-size-ig-portrait" hidden>
      <div class="sc-ribbon" id="sc-ribbon" hidden>Fixtures</div>
      <div class="sc-header">
        <!-- Use your crest — you can swap src to /img/crest.svg if you prefer -->
        <img src="/android-chrome-512x512.png" alt="" class="sc-crest">
        <div class="sc-title" id="sc-title">Senior • Group 1</div>
      </div>

      <!-- Fixtures/Results table -->
      <table class="sc-table sc-fixtures" id="sc-table-fixtures">
        <thead>
          <tr><th>Date/Time</th><th>Match</th><th>Venue</th></tr>
        </thead>
        <tbody id="sc-tbody"></tbody>
      </table>


    <!-- Standings table (PD included for share cards) -->
    <table class="sc-table sc-table-standings" id="sc-table-standings" hidden>
      <thead>
        <tr><th>Team</th><th>P</th><th>W</th><th>D</th><th>L</th><th>PD</th><th>Pts</th></tr>
      </thead>
      <tbody id="sc-standings-body"></tbody>
    </table>

      <div class="sc-footnote" id="sc-footnote" hidden>
        Tie-breaks: Qualification: Head-to-Head (two teams only), then Points Difference, Points For, Goals For. Relegation: Playoff if two teams on equal points.
      </div>

      <div class="sc-footer">Limerick club fixtures, results, and tables at limerickgaahub.ie</div>
    </div>
  </div>
</div>

<!-- html2canvas for PNG export -->
<script src="https://unpkg.com/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<!-- LGH Share Card logic (self-contained; runs only when ?share=1) -->
<script>
(function(){
  // Robust gate: honor either ?share=1 or ?sc=1, OR the early-captured flag
  const urlParams = new URLSearchParams(location.search);
  const SHARE_ENABLED =
    (window.__LGH_SHARE_ENABLED === true) ||
    (urlParams.get('share') === '1') ||
    (urlParams.get('sc') === '1');

  if (!SHARE_ENABLED) return;

  // Use the same params instance below
  const params = urlParams;

 console.log('[LGH] Share Card enabled:', SHARE_ENABLED, location.search);
 
  // Helpers
  const q = sel => document.querySelector(sel);
  const qa = sel => Array.from(document.querySelectorAll(sel));

  
  // Share Card footer copy
  const SC_FOOTER_TEXT = 'Limerick club fixtures, results, and tables at limerickgaahub.ie';
  function setShareFooterText(){
    const el = q('.sc-footer');
    if (el) el.textContent = SC_FOOTER_TEXT;
}


  // --- stacked Date/Time formatting (match site mobile) ---
  const day3 = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  const pad2 = n => String(n).padStart(2,'0');
  function fmtDateParts(dt){
    if(!dt || isNaN(+dt)) return {day:'', dmy:'', time:''};
    return {
      day:  day3[dt.getDay()],
      dmy:  `${pad2(dt.getDate())}/${pad2(dt.getMonth()+1)}`,
      time: '' // we'll keep time from raw string below
    };
  }
  function fmtTimeShort(t){
    if(!t) return '';
    const m = String(t).match(/^(\d{1,2}):(\d{2})/);
    return m ? `${pad2(m[1])}:${m[2]}` : t;
  }

  
  const isResult = (s) => ['Result','Full Time','FT','AET','Walkover','W/O','Abandoned','Final'].includes(String(s||'').trim());

    function labelOf(full){
      const dn = (window.LGH?.DISPLAY_NAMES || {})[full] || null;
      return dn?.label || full || '';
    }

    function isKOrow(r){
      return String(r.group||'').toLowerCase()==='knockout' || String(r.stage||'').toLowerCase()==='knockout';
    }

  
  function parseMatchDate(m){
    const s = m.date_iso || m.iso || m.datetime_iso || null;
    if (s) { const d = new Date(s); if (!isNaN(d)) return d; }
    const m2 = /(\d{1,2})\/(\d{1,2})\/(\d{2,4})/.exec(m.date||'');
    if (m2){ const dd=+m2[1], mm=+m2[2], yy=(m2[3].length===2? +('20'+m2[3]) : +m2[3]); return new Date(yy, mm-1, dd); }
    return null;
  }
  function inPreset(dt, preset){
    if(!dt) return true;
    const z = d=>{const x=new Date(d); x.setHours(0,0,0,0); return x;};
    const today = z(new Date());
    if (preset==='today')    return dt >= today && dt < new Date(+today + 86400000);
    if (preset==='tomorrow'){ const t=new Date(+today + 86400000); return dt >= t && dt < new Date(+t + 86400000); }
    return true; // 'all'
  }

  function compName(code){
    return (window.REVERSE_CODES && window.REVERSE_CODES[code]) || code || '';
  }


// String "1-18" → {g:1, p:18}
function gpFromScoreStr(s){
  const m = String(s||'').match(/^\s*(\d+)\s*-\s*(\d+)\s*$/);
  return m ? { g: +m[1], p: +m[2] } : { g: null, p: null };
}
function pointsFromGP(g,p){
  if (g==null || p==null) return null;
  return (Number(g)||0)*3 + (Number(p)||0);
}

// --- H2H + PD helpers (share-card scope) ---
function _readTotals(m, side){ // returns {total, goals}
  // Prefer split fields, else parse "1-18" strings in home_score/away_score
  let g = (side==='home') ? m.home_goals : m.away_goals;
  let p = (side==='home') ? m.home_points : m.away_points;
  if (g==null || p==null){
    const src = (side==='home') ? (m.home_score || m.home || '') : (m.away_score || m.away || '');
    const mm = String(src||'').match(/^\s*(\d+)\s*-\s*(\d+)\s*$/);
    if (mm){ g = +mm[1]; p = +mm[2]; }
  }
  const total = pointsFromGP(g, p);
  return { total: Number(total||0), goals: Number(g||0) };
}

function _winnerOfRow(m){
  const hs = _readTotals(m,'home'), as = _readTotals(m,'away');
  if (hs.total > as.total) return m.home;
  if (as.total > hs.total) return m.away;
  return null;
}

function _h2hCompareShare(a, b, results){
  // Single prior scored meeting in this comp/group (exclude walkovers)
  const games = results.filter(m =>
    ((m.home===a.team && m.away===b.team) || (m.home===b.team && m.away===a.team)) &&
    isResult(m.status)   // only proper scored results
  );
  if (games.length === 1){
    const w = _winnerOfRow(games[0]);
    if (w === a.team) return -1;
    if (w === b.team) return  1;
  }
  return 0;
}

function _comparePD_PF_GF(a, b){
  const pdA = (a.pf||0) - (a.pa||0);
  const pdB = (b.pf||0) - (b.pa||0);
  if (pdA !== pdB) return pdB - pdA;               // PD
  if ((a.pf||0) !== (b.pf||0)) return b.pf - a.pf;  // Points For
  if ((a.gf||0) !== (b.gf||0)) return b.gf - a.gf;  // Goals For
  return a.team.localeCompare(b.team);
}

function computeStandings(rows){
  const isRes = (window.LGH?.isResult) || isResult;

  // Seed teams
  const teams = new Map();
  for (const r of rows){
    if (!teams.has(r.home)) teams.set(r.home,{team:r.home,p:0,w:0,d:0,l:0,pf:0,pa:0,gf:0,ga:0,pts:0});
    if (!teams.has(r.away)) teams.set(r.away,{team:r.away,p:0,w:0,d:0,l:0,pf:0,pa:0,gf:0,ga:0,pts:0});
  }

  // Results only (incl. walkover handling)
  const results = rows.filter(r => isRes(r.status));

  for (const m of results){
    const H = teams.get(m.home), A = teams.get(m.away);

    // Walkover: played + 2 pts to winner; no PF/PA
    if (/^walkover$/i.test(String(m.status||''))){
      H.p++; A.p++;
      const w = (m.walkover_winner||'').toLowerCase();
      if (w==='home'){ H.w++; H.pts+=2; A.l++; }
      else if (w==='away'){ A.w++; A.pts+=2; H.l++; }
      continue;
    }

    const hs = _readTotals(m,'home');
    const as = _readTotals(m,'away');

    H.p++; A.p++;
    H.pf += hs.total; H.pa += as.total; H.gf += hs.goals; H.ga += as.goals;
    A.pf += as.total; A.pa += hs.total; A.gf += as.goals; A.ga += hs.goals;

    if (hs.total > as.total){ H.w++; H.pts+=2; A.l++; }
    else if (as.total > hs.total){ A.w++; A.pts+=2; H.l++; }
    else { H.d++; A.d++; H.pts++; A.pts++; }
  }

  // Group by points to apply H2H when EXACTLY two are tied
  const all = Array.from(teams.values());
  const byPts = new Map();
  for (const t of all){
    if (!byPts.has(t.pts)) byPts.set(t.pts, []);
    byPts.get(t.pts).push(t);
  }

  const sorted = []
    .concat(...[...byPts.keys()].sort((a,b)=>b-a).map(pts=>{
      const bucket = byPts.get(pts);
      if (bucket.length === 2){
        bucket.sort((a,b)=>{
          const h2h = _h2hCompareShare(a, b, results);
          if (h2h !== 0) return h2h;
          return _comparePD_PF_GF(a,b);
        });
        return bucket;
      }
      bucket.sort(_comparePD_PF_GF);
      return bucket;
    }));

  return sorted;
}




function buildPayload({mode,preset,team,rowsRange,size,title, from, to, what}){
  const comp  = window.LGH?.state?.comp  || '';
  const group = window.LGH?.state?.group || '';
  const meta  = (window.LGH?.DISPLAY_NAMES || {})[comp] || {};
  const isRes = (window.LGH?.isResult || isResult);

// Start with matches: for digest we want ALL competitions; otherwise current comp
let rows = (mode === 'digest')
  ? (window.LGH?.matches || [])
  : (window.LGH?.matches || []).filter(r => r.competition === comp);

// League vs Knockout (skip for digest — spans all comps/groups)
if (mode !== 'digest'){
  if (group === 'Knockout') {
    rows = rows.filter(isKOrow);
  } else {
    rows = rows.filter(r => !isKOrow(r));
    if (!meta.pihc && group) rows = rows.filter(r => (r.group||'') === group);
  }
}

  // Club filter (skip for digest)
  if (mode !== 'digest' && team) rows = rows.filter(r => r.home===team || r.away===team);

// Digest: filter by date range and include (fixtures/results/all)
if (mode === 'digest') {
  // Build a midnight-normalised range
  const mkMid = (d) => { const x = new Date(d); x.setHours(0,0,0,0); return x; };
  const parseISO = (iso) => {
    if (!iso) return null;
    const [Y,M,D] = String(iso).split('-').map(Number);
    return (Y ? new Date(Y, (M||1)-1, (D||1)) : null);
  };
  const A = mkMid(parseISO(from) || new Date());
  const B = mkMid(parseISO(to || from) || A);
  const lo = Math.min(+A, +B), hi = Math.max(+A, +B);

  rows = rows.filter(r => {
    const dt = parseMatchDate(r); if (!dt) return false;
    const d0 = +mkMid(dt);
    return d0 >= lo && d0 <= hi;
  });

  const isRes = (window.LGH?.isResult || isResult);
  const w = String(what||'all').toLowerCase();
  if (w === 'fixtures') rows = rows.filter(r => !isRes(r.status));
  if (w === 'results')  rows = rows.filter(r =>  isRes(r.status));
}


// Fixtures vs Results (digest already handled via 'what')
if (mode !== 'digest'){
  if (mode === 'fixtures') rows = rows.filter(r => !isRes(r.status));
  if (mode === 'results')  rows = rows.filter(r =>  isRes(r.status));
}

  // Date preset (digest uses from/to instead)
  if (mode !== 'digest' && preset && preset !== 'all'){
    rows = rows.filter(r => inPreset(parseMatchDate(r), preset));
  }

  // Slice
  if (rowsRange){
    const m = /^\s*(\d+)\s*-\s*(\d+)\s*$/.exec(rowsRange);
    if (m){ const a=+m[1], b=+m[2]; rows = rows.slice(a-1, b); }
  }

  // Title
  const bits = [labelOf(comp)];
  if (group && !meta.pihc) bits.push(group);
  if (team) bits.push(team);
  if (preset==='today')    bits.push('Today');
  if (preset==='tomorrow') bits.push('Tomorrow');

  return { mode, size, title: (title?.trim() || bits.filter(Boolean).join(' • ')), rows };
}


function scoreMid(m){
  const s = String(m.status||'').toLowerCase();
  if (s === 'walkover') return 'W/O';

  // Accept split fields OR "1-18" strings
  const asPair = str => {
    const mm = String(str||'').match(/^\s*(\d+)\s*-\s*(\d+)\s*$/);
    return mm ? {g:+mm[1], p:+mm[2]} : {g:null, p:null};
  };

  let hg = m.home_goals, hp = m.home_points, ag = m.away_goals, ap = m.away_points;
  if (hg==null || hp==null){ const a = asPair(m.home_score); hg = a.g; hp = a.p; }
  if (ag==null || ap==null){ const b = asPair(m.away_score); ag = b.g; ap = b.p; }

  if ([hg,hp,ag,ap].some(v => v==null || v==='')) return '—';
  return `${hg}-${hp} – ${ag}-${ap}`;
}


function matchCellHTML(m, mode){
  const isRes = (window.LGH?.isResult || isResult);
  // In digest: choose mid per-row; otherwise follow mode
  const midVal = (mode === 'digest') ? (isRes(m.status) ? scoreMid(m) : 'v')
                                     : (mode === 'results' ? scoreMid(m) : 'v');
  const mCls   = (mode === 'results' || (mode === 'digest' && isRes(m.status)))
               ? 'sc-match-mid sc-score' : 'sc-match-mid';
  const comp   = (mode === 'digest') ? `<div class="sc-comp">${m.competition || ''}</div>` : '';
  return `
    <div class="sc-match">
      ${comp}
      <div class="sc-match-team">${m.home}</div>
      <div class="${mCls}">${midVal}</div>
      <div class="sc-match-team">${m.away}</div>
    </div>`;
}


function renderCard(payload){
  const card = q('#share-card');

  // Reset size + density classes
  card.classList.remove(
    'sc-size-ig-portrait','sc-size-ig-square','sc-size-x-landscape',
    'sc-tight-7','sc-tight-8','sc-hero'
  );
  card.classList.add(
    payload.size === 'ig-square'    ? 'sc-size-ig-square' :
    payload.size === 'x-landscape'  ? 'sc-size-x-landscape' :
                                      'sc-size-ig-portrait'
  );

  // Mode class for spacing tweaks (fixtures/results vs table)
  card.classList.remove('sc-mode-fixtures','sc-mode-results','sc-mode-table');
  card.classList.add(
    payload.mode === 'results' ? 'sc-mode-results' :
    payload.mode === 'table'   ? 'sc-mode-table'   : 'sc-mode-fixtures'
  );

  
  q('#sc-title').textContent = payload.title || '';
  // --- Corner ribbon text & show ---
(function(){
  const rib = q('#sc-ribbon');
  if (!rib) return;

const modeWord =
  payload.mode === 'results' ? 'Results' :
  payload.mode === 'table'   ? 'Table'   :
  payload.mode === 'digest'  ? 'Digest'  : 'Fixtures';

  // Try to surface "Today" / "Tomorrow" if present in the title
  const m = /\b(Today|Tomorrow)\b/i.exec(payload.title || '');
  const when = m ? m[1] : '';

  rib.textContent = when ? `${modeWord} • ${when}` : modeWord;
  rib.hidden = false;
})();

  const tb = q('#sc-tbody');
  const tf = q('#sc-table-fixtures');
  const st = q('#sc-table-standings');
  const sb = q('#sc-standings-body');

  if (payload.mode === 'table') {
    // Standings view
    tf.hidden = true;
    st.hidden = false;

const standings = computeStandings(payload.rows);
sb.innerHTML = standings.map(t => `
  <tr>
    <td>${t.team}</td>
    <td>${t.p}</td><td>${t.w}</td><td>${t.d}</td><td>${t.l}</td>
    <td>${(t.pf||0)-(t.pa||0)}</td>
    <td>${t.pts}</td>
  </tr>
`).join('');

// Apply density based on actual count
const rowCount = standings.length;
if (rowCount === 6) card.classList.add('sc-tight-6');
if (rowCount === 7) card.classList.add('sc-tight-7');
if (rowCount >= 8)  card.classList.add('sc-tight-8');


// Show footnote for table mode
q('#sc-footnote').hidden = false;

} else {
  // Fixtures / Results view
  q('#sc-footnote').hidden = true;  // hide footnote on fixtures/results
  st.hidden = true;
  tf.hidden = false;

  tb.innerHTML = payload.rows.map(m => {
    const dt = parseMatchDate(m) || (m.date ? new Date(m.date + 'T00:00:00') : null);
    const p  = fmtDateParts(dt);
    const t  = fmtTimeShort(m.time || '');
    const mid = matchCellHTML(m, payload.mode);   // Team A / mid / Team B
    return `
      <tr>
        <td>
          <div class="dt3">
            <div class="dt-day">${p.day}</div>
            <div class="dt-date">${p.dmy}</div>
            <div class="dt-time">${t}</div>
          </div>
        </td>
        <td>${mid}</td>
        <td>${m.venue || '—'}</td>
      </tr>`;
  }).join('');


    const rowCount = payload.rows.length;
    if (rowCount <= 2) card.classList.add('sc-hero');   // make 1–2 matches feel less bare
  }

  card.hidden = false;
  q('#sc-download').disabled = false;
  q('#sc-copycap').disabled = false;

  // Ensure footer text matches your constant
  setShareFooterText();
}


  async function downloadPNG(){
    const src = q('#share-card');
  
    // Clone outside the scrollable modal so nothing is clipped
    const clone = src.cloneNode(true);
    clone.id = 'share-card-clone';
    clone.hidden = false;
    clone.style.position = 'fixed';
    clone.style.left = '-10000px';
    clone.style.top  = '0';
    document.body.appendChild(clone);
  
    try{
      const SCALE = Math.min(Math.max(window.devicePixelRatio || 2, 2), 3);
      const canvas = await html2canvas(clone, {
      scale: SCALE,
      backgroundColor: null,
      useCORS: true,
      removeContainer: true
    });

      
      const a = document.createElement('a');
      a.href = canvas.toDataURL('image/png');
      a.download = 'lgh-card.png';
      a.click();
    } finally {
      document.body.removeChild(clone);
    }
  }


  function makeCaption(payload){
    const modeWord = payload.mode==='fixtures' ? 'fixtures' :
                     payload.mode==='results' ? 'results' : 'table';
    return `${payload.title} ${modeWord}. More: limerickgaahub.ie`;
  }

  function injectButtons(){
    qa('.sharebar').forEach(bar=>{
      if(bar.querySelector('.lgh-sc-btn')) return;
      const btn = document.createElement('button');
      btn.className = 'lgh-sc-btn';
      btn.type = 'button';
      btn.textContent = 'Create Share Image';
      btn.addEventListener('click', openOverlay);
      bar.appendChild(btn);
    });
  }

  function openOverlay(){ q('#sharecard-overlay').hidden = false; }
  function closeOverlay(){ q('#sharecard-overlay').hidden = true; }

  function wireOverlay(){
    const overlay = q('#sharecard-overlay');
    const form = q('#sc-form');
    q('.sc-x').addEventListener('click', closeOverlay);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeOverlay(); });

    // Toggle Digest-only rows
    const modeSel  = form.querySelector('select[name="mode"]');
    const rangeRow = form.querySelector('[data-row="range"]');
    const whatRow  = form.querySelector('[data-row="digest-what"]');
    function updateDigestRows(){
      const on = (modeSel && modeSel.value === 'digest');
      if (rangeRow) rangeRow.style.display = on ? '' : 'none';
      if (whatRow)  whatRow.style.display  = on ? '' : 'none';
      if (on) {
        const def = form.querySelector('input[name="what"][value="all"]');
        if (def) def.checked = true;
      }
    }
    if (modeSel) modeSel.addEventListener('change', updateDigestRows);
    updateDigestRows();

    
    q('#sc-preview').addEventListener('click', ()=>{
      const payload = buildPayload({
        mode: form.mode.value,
        preset: form.preset.value,
        team: (form.team.value||'').trim() || null,
        rowsRange: (form.rows.value||'').trim() || null,
        size: form.size.value,
        title: form.title.value
      });
      renderCard(payload);
      overlay._lastPayload = payload;
    });

    q('#sc-preview').addEventListener('click', ()=>{
      const payload = buildPayload({
        mode: form.mode.value,
        preset: form.preset.value,
        team: (form.team.value||'').trim() || null,
        rowsRange: (form.rows.value||'').trim() || null,
        size: form.size.value,
        title: form.title.value,
        from: form.from ? form.from.value : null,
        to:   form.to   ? form.to.value   : null,
        what: form.what ? form.what.value : 'all'
      });
      renderCard(payload);
      overlay._lastPayload = payload;
    });



    
    q('#sc-download').addEventListener('click', downloadPNG);

    q('#sc-copycap').addEventListener('click', ()=>{
      const payload = overlay._lastPayload || {title:'', mode:'fixtures'};
      const text = makeCaption(payload);
      navigator.clipboard.writeText(text).catch(()=>{});
    });

    // Deep-link presets ?sc=1&mode=fixtures&preset=tomorrow&team=...&size=ig-portrait
    if(params.get('share') === '1'){
      openOverlay();
      if(params.get('mode')) form.mode.value = params.get('mode');
      if(params.get('preset')) form.preset.value = params.get('preset');
      if(params.get('team')) form.team.value = params.get('team');
      if(params.get('rows')) form.rows.value = params.get('rows');
      if(params.get('size')) form.size.value = params.get('size');
      if(params.get('title')) form.title.value = params.get('title');
      q('#sc-preview').click();
    }
  }

window.addEventListener('load', ()=>{
  setTimeout(()=>{
    injectButtons();
    wireOverlay();
    setShareFooterText(); // set footer once on load
  }, 250);
});
})();
</script>
</body>
</html>
